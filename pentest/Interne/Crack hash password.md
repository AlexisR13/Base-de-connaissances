```toc

```


# John The Ripper
## Basic
```bash
# Crack NT hash
john --format=NT <file>
john --format=NT <file> --show 
john --restore
```

## Wordlist
```bash 
john --format=NT --wordlist=<path_to_list> <file>
```

*Rockyou* est présent ici sur Kali : */usr/share/wordlists/rockyou.txt*
On peut trouver des wordlist françaises ici : https://github.com/clem9669/wordlists.git 

## Rules
### Utilisation des règles par défaut
Les règles par défaut utilise la wordlist pour en dériver de nouveau mots de passe potentiels. C'est extrêmement efficace !
```bash
john --format=NT --wordlist=<path_to_list> --rules <file>
```

On peut alors créer une liste de mot de passe custom adapté au contexte du client et utiliser les règles !

### Règles custom
Pour définir des règles particulières en accord avec la politique de mots de passe, il faut les ajouter soit dans le fichier de configuration de John : */etc/john/john.conf*, soit dans un fichier *john-local.conf* dans le répertoire d'exécution de John.
Bon article sur les règles possibles : https://miloserdov.org/?p=5477

```bash
john --format=NT --wordlist=<path_to_list> --rules=<rule_name> --config=john-local.conf <file>
```

Longueur minimale de 10 octets sans créer de règles :
```bash
john --format=NT --wordlist=<path_to_list> --min-length=10 <file>
```


## Modes
Quand aucune wordlist n'est précisé, John utilise les modes suivants dans cet ordre :
- *single* : utilise le nom d'utilisateur comme mot de passe et teste des modifications dessus 
- *wordlist* : teste tous les mots de sa wordlist par défaut (pas beaucoup)
- *incremental* : bruteforce total en testant toutes les combinaisons possibles et en augmentant la longueur du mot de passe testé progressivement (ne finit jamais)

Si une wordlist est précisée, John fait uniquement le mode wordlist.

### Mode single
Le mode single est puissant, ne pas oublier de l'utiliser ! En plus il est utilisé par défaut si on ne précise pas de wordlist.
-> Pour qu'il fonctionne il faut garder les noms d'utilisateur dans le fichier des hash.
```bash
john --format=NT <file>
```

### Mode prince
Un mode supplémentaire est le mode Prince, qui fonctionne plus ou moins comme le mode wordlist mais en combinant plusieurs mots de passe de la wordlist pour tester des mots de passe plus longs.
Explication ici : https://fossies.org/linux/john/doc/PRINCE
Ce mode se combine très bien avec les règles et les wordlist personnalisées.
```bash
john --format=NT --prince=<path_to_wordlist> --rules <file>
```

### Mode incrémental
On peut lui demande de faire le mode incrémental comme suit :
```bash
john --format=NT --incremental <file>
```

On peut aussi lui demander de faire le mode incrémental seulement avec des chiffres (mot de passe de "0" à "99999999999999999999") avec la commande :
```bash
john --format=NT --incremental=digits <file>
```